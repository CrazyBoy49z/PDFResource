<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Usage - PDFresource</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">PDFresource</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Home</a>
                </li>
            
            
            
                <li >
                    <a href="../installation/">Installation</a>
                </li>
            
            
            
                <li class="active">
                    <a href="./">Usage</a>
                </li>
            
            
            
                <li >
                    <a href="../donate/">Donate</a>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../installation/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../donate/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/Jako/PDFresource">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#usage">Usage</a></li>
        
            <li><a href="#pdf-generation-on-the-fly">PDF generation on the fly</a></li>
        
            <li><a href="#pdf-options">PDF options</a></li>
        
            <li><a href="#resource-based-pdf-options">Resource based PDF options</a></li>
        
            <li><a href="#pdf-content-template">PDF content template</a></li>
        
            <li><a href="#pdf-styles-template">PDF styles template</a></li>
        
            <li><a href="#custom-fonts">Custom fonts</a></li>
        
            <li><a href="#linking-to-a-generated-pdf">Linking to a generated PDF</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="usage">Usage</h1>
<p><em>PDFresource</em> works out of the box and creates PDF files from all resources, that have the template variable <code>create_pdf</code> assigned (the template variable name could be changed in MODX system settings). The generated PDF files are saved with the current alias path to <code>{assets_url}/pdf/</code></p>
<p>So after the installation you only have to assign the template variable <code>create_pdf</code> to the templates of the resources that should be converted to PDF and check that template variable in the resource (checked by default).</p>
<h3 id="pdf-generation-on-the-fly">PDF generation on the fly</h3>
<p>To generate PDF files on the fly with <em>PDFresource</em> you have to assign the template variable <code>live_pdf</code> to a template (the template variable name could be changed in MODX system settings) and check this template variable on a resource. After this, the resource will be rendered as PDF file in the browser. The file could be saved with the current alias.</p>
<p><strong>Caution:</strong> This option should only be activated, if the content of the resource is dynamically changed. Generating the PDF is a quite resource consuming process and it could take some time.</p>
<h3 id="pdf-options">PDF options</h3>
<p>By default the PDF content and the CSS code for the PDF could be changed with the chunks <code>tplPDF</code> and <code>tplCSS</code>. Some other PDF options (pagesize, margins etc.) could be set in MODX system setting.</p>
<p>The following MODX system settings are available in the namespace <code>pdfresource</code>:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>pdfresource.mode</td>
<td>mPDF mode, see <a href="http://mpdf1.com/manual/index.php?tid=184">mode parameter</a> and <a href="http://mpdf1.com/manual/index.php?tid=504">choosing a configuration</a> in the mPDF documentation for possible values.</td>
<td>-</td>
</tr>
<tr>
<td>pdfresource.format</td>
<td>PDF page size. If you want to change the orientation of a "named" PDF page size you have to append -L to the PDF page size string (i.e. A4-L).</td>
<td>A4</td>
</tr>
<tr>
<td>pdfresource.defaultFontSize</td>
<td>PDF default font size</td>
<td>0</td>
</tr>
<tr>
<td>pdfresource.defaultFont</td>
<td>PDF default font</td>
<td>-</td>
</tr>
<tr>
<td>pdfresource.mgl</td>
<td>PDF margin left</td>
<td>15</td>
</tr>
<tr>
<td>pdfresource.mgr</td>
<td>PDF margin right</td>
<td>15</td>
</tr>
<tr>
<td>pdfresource.mgt</td>
<td>PDF margin top</td>
<td>16</td>
</tr>
<tr>
<td>pdfresource.mgb</td>
<td>PDF margin bottom</td>
<td>16</td>
</tr>
<tr>
<td>pdfresource.mgh</td>
<td>PDF margin header</td>
<td>9</td>
</tr>
<tr>
<td>pdfresource.mgf</td>
<td>PDF margin footer</td>
<td>9</td>
</tr>
<tr>
<td>pdfresource.orientation</td>
<td>PDF orientation. If you want to change the orientation of a "named" PDF page size you have to append -L to the PDF page size string (i.e. A4-L).</td>
<td>P</td>
</tr>
<tr>
<td>pdfresource.pdfTpl</td>
<td>Template chunk for the PDF content. You could use @FILE binding to retreive the chunk from a file.</td>
<td>tplPDF</td>
</tr>
<tr>
<td>pdfresource.cssTpl</td>
<td>Template chunk for the PDF style. You could use @FILE binding to retreive the chunk from a file.</td>
<td>tplCSS</td>
</tr>
<tr>
<td>pdfresource.pdfTv</td>
<td>Name ot the template variable that activates the PDF generation.</td>
<td>create_pdf</td>
</tr>
<tr>
<td>pdfresource.pdfTvLive</td>
<td>Name of the template variable that activates the on the fly PDF generation.</td>
<td>live_pdf</td>
</tr>
<tr>
<td>pdfresource.pdfTvOptions</td>
<td>Name of the template variable that change the options of the generated PDF. The content of this template variable has to contain a JSON encoded object of the options you want to change.</td>
<td>pdf_options</td>
</tr>
<tr>
<td>pdfresource.processTVs</td>
<td>Process template variables during PDF generation.</td>
<td>true</td>
</tr>
<tr>
<td>pdfresource.tvPrefix</td>
<td>Template variable prefix in the template chunk.</td>
<td>.tv</td>
</tr>
<tr>
<td>pdfresource.customFonts</td>
<td>JSON encoded object of custom fonts, see <a href="#custom-fonts">Custom fonts</a> for an example. Please copy the font files to <strong>{core_path}components/pdfresource/vendor/mpdf/mpdf/ttfonts/</strong>.</td>
<td>-</td>
</tr>
<tr>
<td>pdfresource.generateOnPrerender</td>
<td>Generate not existing PDF files during OnWebPagePrerender. This option is useful, if you have installed PDFresource in an existing MODX installation. You don't have to save all resources that could generate a PDF file then.</td>
<td>false</td>
</tr>
</tbody>
</table>
<p>The following MODX system settings have to be created to use them:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>pdfresource.creator</td>
<td>Author of the PDF file (defaults to <code>site_name</code> system setting).</td>
</tr>
<tr>
<td>pdfresource.author</td>
<td>Creator of the PDF file (defaults to <code>site_url</code> system setting + <code>powered by PDFresource/mPDF</code>).</td>
</tr>
</tbody>
</table>
<h3 id="resource-based-pdf-options">Resource based PDF options</h3>
<p>All these options could be modified on resource base in a template variable <code>pdf_options</code> (the template variable name could be changed in MODX system settings). This template variable has to contain an JSON encoded object of options without the prefix <code>pdfresource.</code>.</p>
<h4 id="example">Example</h4>
<pre><code>{
    &quot;format&quot;: &quot;A4-L&quot;,
    &quot;mgl&quot;: 20,
    &quot;mgr&quot;: 20
}
</code></pre>

<h3 id="pdf-content-template">PDF content template</h3>
<p>The content of the PDF is filled with the chunk defined by <code>pdfresource.pdfTpl</code> MODX system setting (or on resource base by the <code>pdf_options</code> template variable). By default PDFresource uses the <code>tplPDF</code> chunk. You could fill this chunk like a normal MODX template with resource placeholders, snippet calls etc. Since the PDF is not created on the fly, the content is fixed after saving the resource.</p>
<h3 id="pdf-styles-template">PDF styles template</h3>
<p>The style of the PDF is set with the chunk defined by <code>pdfresource.cssTpl</code> MODX system setting (or on resource base by the <code>pdf_options</code> template variable). By default PDFresource uses the <code>tplCSS</code> chunk. There are some limitations with mPDF and CSS (i.e. <code>position: absolute</code> works only with elements on root level).</p>
<h3 id="custom-fonts">Custom fonts</h3>
<p>To use custom fonts in your PDF files, you have to add them as JSON encoded object in the MODX system setting <code>pdfresource.customFonts</code>. See <a href="http://mpdf1.com/manual/index.php?tid=501">Fonts</a> in the mPDF documentation a the full description. </p>
<h4 id="example_1">Example</h4>
<pre><code>{
  &quot;frutiger&quot;: {
    &quot;R&quot;: &quot;Frutiger-Normal.ttf&quot;,
    &quot;I&quot;: &quot;FrutigerObl-Normal.ttf&quot;
  }
}
</code></pre>

<p>Please copy the font files to <strong>{core_path}components/pdfresource/vendor/mpdf/mpdf/ttfonts/</strong>.</p>
<h3 id="linking-to-a-generated-pdf">Linking to a generated PDF</h3>
<p>All generated PDF files are saved with the aliaspath of the generating resource. So if you want to create a link to that PDF file, you could use the following code:</p>
<pre><code>&lt;a href=&quot;[[*id:pdfresourcelink]]&quot;&gt;PDF&lt;/a&gt;
</code></pre>

<!-- Piwik -->

<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//piwik.partout.info/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 18]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>

<noscript><p><img src="//piwik.partout.info/piwik.php?idsite=18" style="border:0;" alt="" /></p></noscript>

<!-- End Piwik Code --></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>